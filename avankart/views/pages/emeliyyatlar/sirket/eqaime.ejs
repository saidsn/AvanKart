<div>
    <div
        class="flex items-center gap-3 text-[13px] text-messages dark:text-primary-text-color-dark font-medium">
        <div class="flex items-center gap-2">
            <a href="../dashboard/dashboard.html"
                class="cursor-pointer hover:text-primary dark:hover:text-primary-dark">Avankart</a>
            <div class="icon stratis-slash-01-forward"></div>
        </div>
        <div class="flex items-center gap-2">
            <a href="#"
                class="cursor-pointer hover:text-primary dark:hover:text-primary-dark">Şirkət</a>
            <div class="icon stratis-slash-01-forward"></div>
        </div>
        <div class="flex items-center gap-2">
            <span
                class="text-tertiary-text dark:text-tertiary-text-color-dark cursor-default">E-qaimə</span>
        </div>
    </div>
    <div class="flex w-full mt-[13px] mb-[12px]">
        <div class="w-full">
            <div class="flex w-full mt-[13px] mb-[12px]">
                <div class="w-full flex">
                    <% result.cards?.forEach((card, index) => { %>
                        <% 
                        let roundedClass = "";
                        if(index === 0 && index === result.cards.length - 1) roundedClass = "rounded-full";
                        else if(index === 0) roundedClass = "rounded-l-full";
                        else if(index === result.cards.length - 1) roundedClass = "rounded-r-full";
                        else roundedClass = "rounded-full";
                        %>
                        <div class="flex flex-col  shrink-0 " style="width: <%= 100 / result.cards.length %>%">
                            <div class="text-[11px] font-normal text-messages opacity-50 mb-[6px]"><%= card.name %></div>
                            <div class="flex justify-between items-center h-[30px] w-full <%= roundedClass %> <%= card.color ?? 'bg-sidebar-bg' %>" style="background-color: <%= card.color %>;">
                                <div class="text-[13px] font-medium text-messages pl-[16px] value"><%= card.totalBalance.toFixed(2) %> AZN</div>
                                <div class="text-[11px] font-normal text-messages opacity-65 pr-[8px] percent"><%= card.percentage.toFixed(0) %>%</div>
                            </div>
                        </div>
                    <% }) %>
                </div>
                <div class="flex flex-col w-[13%] ml-[11px] shrink-0">
                    <div class="text-[11px] font-normal text-messages opacity-50 mb-[6px]">Toplam məbləğ</div>
                    <div class="bg-sidebar-bg rounded-l-full rounded-r-full h-[30px] w-full flex items-center justify-start">
                    <div class="text-[13px] font-medium text-messages pl-[12px] toplam-mebleg"><%= result.totalAmount?.toFixed(2) ?? 0 %> AZN</div>
                    </div>
                </div>
            </div>
        </div>
        </div>

        <div class="flex flex-col gap-3">
            <div
                class="pb-3 flex items-center justify-between border-b-[.5px] border-stroke dark:border-[#FFFFFF1A] mt-[15px]">
                <div class="flex rounded-lg">
                    <div id="invoysTitleContainer" class="text-[15px] text-messages font-medium pt-[5px]">
                        <!-- dinamikdi, eqaimeTable dan gelir  -->
                    </div>
                    <!-- Seçilmiş dəyərlərin göstəriləcəyi hissə -->
                    <div id="selectedValues"
                        class="hidden text-[13px] font-medium py-2 bg-container-2 rounded-lg">
                        <!-- Dəyərlər bura dinamik əlavə ediləcək -->
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <div
                        class="relative font-normal flex items-center w-[237px] border border-surface-variant dark:border-surface-variant-dark rounded-full overflow-hidden focus-within:border-focus focus-within:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] focus-within:ring-0 focus-within:outline-none active:border-focus active:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] transition-all ease-out duration-300 hover:bg-input-hover dark:hover:bg-input-hover-dark">
                        <input id="customSearch" type="text" placeholder="Axtarış..."
                            class="w-full h-full bg-transparent border-none focus:outline-none outline-none ring-0 focus:ring-0 text-[13px] text-messages dark:text-primary-text-color-dark placeholder:text-on-surface-variant-dark dark:placeholder:text-[#636B6F]">
                        <div class="absolute right-3">
                            <div class="icon stratis-search-02 dark:text-primary-text-color-dark"></div>
                        </div>
                    </div>
                    <div id="refreshTable"
                        class="w-[155px] overflow-hidden border border-surface-variant dark:border-surface-variant-dark rounded-full flex items-center justify-center gap-2 text-[13px] text-messages dark:text-primary-text-color-dark hover:text-focus dark:hover:text-focus-color-dark font-medium py-[6.5px] px-[18px]">
                        <span>Cədvəli yenilə</span>
                        <span
                            class="icon stratis-arrow-refresh-04 text-messages dark:text-primary-text-color-dark"></span>
                    </div>
                    <div onclick="openFilterModal()"
                        class="w-[92px] cursor-pointer border border-surface-variant dark:border-surface-variant-dark rounded-full flex items-center justify-center gap-2 text-[13px] text-messages dark:text-primary-text-color-dark hover:text-focus dark:hover:text-focus-color-dark font-medium py-[6.5px] px-[18px] ">
                        <a href="#"
                            class="icon stratis-filter  text-messages dark:text-primary-text-color-dark mt-[2.5px]"></a>
                        <a href="#" class="">Filter</a>
                    </div>
                    <button onclick="toggleInvoysModal()"
                        class="cursor-pointer w-[166px] h-[34px] rounded-[100px] flex gap-2.5 items-center justify-center bg-body-bg border border-surface-variant hover:text-focus hidden ">
                        <span class="icon stratis-flex-columns text-messages w-[12px] h-[14px]"></span><span
                            class="hover:text-focus text-[13px] text-messages font-medium">E-qaimə
                            qovluğu</span>
                    </button>
                </div>
            </div>
            <table id="myTable" class="table-fixed border-collapse w-full">
                <thead class="border-none pb-0.5">
                    <tr
                        class="bg-container-2 dark:bg-container-2-dark border-none text-[12px] text-secondary-text opacity-65 font-normal">
                        <th class="rounded-l-lg filtering">Şirkət</th>
                        <th class="filtering">Qaimə nömrəsi</th>
                        <th class="filtering">Məbləğ</th>
                        <th class="filtering">Tarix intervalı</th>
                        <th class="filtering">Status</th>
                        <th class="w-10 rounded-r-lg"></th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
            <div class="pt-2">
                <div class="bg-sidebar-bg dark:bg-side-bar-bg-dark rounded-t-[8px] px-6 flex flex-col gap-3">
                    <div class="py-5 flex items-center justify-between">
                        <div class="text-[13px] flex items-center gap-2">
                            <span class="font-normal opacity-65">Səhifə sayı:</span>
                            <span id="pageCount" class="font-medium">1 / 49</span>
                        </div>
                        <div class="flex items-center gap-5">
                            <div>
                                <div id="customPagination" class="flex items-center"></div>
                            </div>
                            <div>
                                <input class="page-input w-[63px] h-[32px] text-[12px] text-center text-messages dark:text-primary-text-color-dark placeholder:text-on-surface-variant-dark dark:text-[#636B6F] font-normal bg-menu dark:bg-menu-dark hover:bg-input-hover dark:hover:bg-input-hover-dark border border-stroke dark:border-[#FFFFFF1A] rounded-[8px]
            focus:border-focus focus:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] focus:ring-0 focus:outline-none
            active:border-focus active:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)]
            transition-all ease-out duration-300" type="text" placeholder="Səhifə" />
                                <a href="#"
                                    class="go-button text-[13px] text-body-bg dark:text-primary-text-color-dark font-medium bg-primary dark:bg-primary-dark hover:bg-hover-button dark:hover:bg-hover-button-dark rounded-[8px] py-[6.5px] px-[18px]">GO</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="tesdiqModal" class="hidden fixed inset-0 bg-[#0000002A] flex items-center justify-center z-100">
    <div
        class="relative w-[306px] h-[190px] border-[#0000001A] border-[0.5px] shadow-[0px_0px_30px_0px_rgba(0,0,0,0.05)] rounded-lg bg-menu p-3">
        <div
            class="flex items-center justify-center w-[40px] h-[40px] bg-inverse-on-surface rounded-full">
            <div class="icon iconex-danger-1 w-[20px] h-[20px]"></div>
        </div>
        <div class="flex flex-col gap-1 pt-3">
            <h2 class="text-messages font-medium text-[15px] dark:text-[#FFFFFF]">Təsdiqləmə</h2>
            <div class="flex flex-wrap gap-[3px] font-normal text-[13px] text-messages">
                <span class="font-medium text-messages">
                    <span id="qaimeid_approve">—</span>
                    <span class="text-tertiary-text">
                        invoys nömrəli hesablaşmanı təsdiqləmək istədiyinizə əminsiniz?
                    </span>
                </span>
            </div>
        </div>
        <div class="absolute bottom-[12px] right-[12px] flex gap-[12px]">
            <button
                class="text-[12px] cursor-pointer text-on-surface-variant font-medium bg-surface-bright rounded-[50px] !w-[51px] !h-[25px] dark:bg-[#36393E] dark:text-white"
                onclick="closeTesdiqModal()">Xeyr</button>
            <button
                class="text-[12px] cursor-pointer text-on-primary font-medium bg-success rounded-[50px] !w-[112px] !h-[25px] hover:bg-[#4CAF1E] transition"
                onclick="openConfirmModal()">Bəli, təsdiqlə</button>
        </div>
    </div>
</div>

<div id="confirmModal" class="hidden fixed inset-0 bg-[#0000002A] flex items-center justify-center z-100">
    <div class="relative w-[450px] h-[399px] border-[#0000001A] border-[2px]
                shadow-[0px_0px_30px_0px_rgba(0,0,0,0.05)] rounded-[12px] bg-white z-0">
        <div class="flex items-center justify-between p-6">
            <h2 class="text-[15px] font-medium text-messages">Hesab təsdiqi</h2>
            <div onclick="closeConfirmModal()" class="icon stratis-x-02 text-xs cursor-pointer"></div>
        </div>
        <div class="flex flex-col  mb-[24px] max-w-[400px] w-[100%] m-auto">
            <h2 class=" pb-[4px] text-[17px]  font-semibold  leading-[160%]  text-messages ">
                OTP</h2>
            <div class="flex flex-wrap gap-[3px] font-normal text-[13px] leading-[160%]  text-messages opacity-100">
                <span class="font-medium">ramin.orucovvv@gmail.com</span>
                <span class="opacity-65 font-normal">email adresinə göndərilən 6 </span>
                <span class=" opacity-65 font-normal">rəqəmli şifrəni daxil edin</span>
            </div>
        </div>
        <form id="confirmForm">
            <div class=" text-center space-y-4 max-w-[400px] w-[100%] m-auto">
                <div id="countdown"
                    class="text-messages bg-inverse-on-surface  rounded-full w-[60px] h-[27px] mx-auto py-1 text-[12px] mb-[24px] font-medium  leading--[160%]">
                    4:59</div>
                <div class="grid grid-cols-6 gap-2 mt-[8px]">
                    <input type="text" maxlength="1"
                        class="otp-input border-[1px] rounded-[8px] border-stroke border-opacity-[10%] pl-[12px] placeholder-on-surface-variant-dark hover:bg-input-hover focus:border-focus focus:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] focus:ring-0 focus:outline-none active:border-focus active:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] transition-all ease-out duration-300 w-full h-[34px] text-center border-2 border-purple-300 rounded-md focus:border-purple-500 text-xl"
                        inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code">
                    <input type="text" maxlength="1"
                        class="otp-input border-[1px] rounded-[8px] border-stroke border-opacity-[10%] pl-[12px] placeholder-on-surface-variant-dark hover:bg-input-hover focus:border-focus focus:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] focus:ring-0 focus:outline-none active:border-focus active:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] transition-all ease-out duration-300 w-full h-[34px] text-center border-2 border-purple-300 rounded-md focus:border-purple-500 text-xl"
                        inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code">
                    <input type="text" maxlength="1"
                        class="otp-input border-[1px] rounded-[8px] border-stroke border-opacity-[10%] pl-[12px] placeholder-on-surface-variant-dark hover:bg-input-hover focus:border-focus focus:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] focus:ring-0 focus:outline-none active:border-focus active:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] transition-all ease-out duration-300 w-full h-[34px] text-center border-2 border-purple-300 rounded-md focus:border-purple-500 text-xl"
                        inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code">
                    <input type="text" maxlength="1"
                        class="otp-input border-[1px] rounded-[8px] border-stroke border-opacity-[10%] pl-[12px] placeholder-on-surface-variant-dark hover:bg-input-hover focus:border-focus focus:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] focus:ring-0 focus:outline-none active:border-focus active:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] transition-all ease-out duration-300 w-full h-[34px] text-center border-2 border-purple-300 rounded-md focus:border-purple-500 text-xl"
                        inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code">
                    <input type="text" maxlength="1"
                        class="otp-input border-[1px] rounded-[8px] border-stroke border-opacity-[10%] pl-[12px] placeholder-on-surface-variant-dark hover:bg-input-hover focus:border-focus focus:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] focus:ring-0 focus:outline-none active:border-focus active:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] transition-all ease-out duration-300 w-full h-[34px] text-center border-2 border-purple-300 rounded-md focus:border-purple-500 text-xl"
                        inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code">
                    <input type="text" maxlength="1"
                        class="otp-input border-[1px] rounded-[8px] border-stroke border-opacity-[10%] pl-[12px] placeholder-on-surface-variant-dark hover:bg-input-hover focus:border-focus focus:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] focus:ring-0 focus:outline-none active:border-focus active:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] transition-all ease-out duration-300 w-full h-[34px] text-center border-2 border-purple-300 rounded-md focus:border-purple-500 text-xl"
                        inputmode="numeric" pattern="[0-9]*" autocomplete="one-time-code">
                </div>
            </div>
            <div class="text-center  flex justify-center max-w-[400px] w-[100%] m-auto">
                <p class="font-normal leading--[160%] opacity-[65%] text-[12px] pr-[4px] pt-[24px]">
                    Email adresinə mesaj gəlmədi?</p>
                <a href="#"
                    class="text-[12px] font-medium text-messages  px-[12px] py-[3px] mt-[21px] hover:bg-[#F6D9FF] rounded-[50px] active:bg-[#F6D9FF] disabled:bg-none  ">Yenidən
                    göndər</a>
            </div>
            <div class="absolute bottom-[24px] right-[12px] flex gap-[12px]">
                <button href="#"
                    class=" text-[13px] text-on-surface-variant font-medium bg-surface-bright rounded-[50px] !w-[83px] !h-[34px] cursor-pointer"
                    onclick="closeConfirmModal()">Ləğv et</button>
                <button href="#"
                    class=" text-[13px] text-on-primary font-medium bg-primary rounded-[50px] !w-[91px] !h-[34px] cursor-pointer hover:bg-[#88649A] transition">Təsdiqlə</button>
            </div>
        </form>
    </div>
</div>

<div id="invoysModal" class="hidden fixed inset-0 bg-[#0000002A] flex items-center justify-center z-100">
    <div
        class="relative w-[1199px] max-w-[90%] border-[#0000001A] border-[2px] shadow-[0px_0px_30px_0px_rgba(0,0,0,0.05)] rounded-[12px] bg-menu">
        <!-- Modal Başlığı (dinamik olaraq dəyişəcək) -->
        <div
            class="py-[18px] px-6 sticky top-0 z-50 flex items-center justify-between border-b-[.5px] border-stroke">
            <div id="backButton" class="flex items-center gap-4 cursor-pointer">
                <!-- Geri qayıtma düyməsi -->
                <button id="backArrow" class="hidden text-messages">
                    <div class="icon stratis-arrow-left text-xs cursor-pointer"></div>
                </button>
                <div id="modalTitle" class="text-[15px] font-medium">
                    Şirkətlər (24)
                </div>
            </div>
            <!-- Bağlama ikonu -->
            <div onclick="toggleInvoysModal()" class="icon stratis-x-02 text-xs cursor-pointer"></div>
        </div>

        <!-- Şirkətlər Siyahısı üçün Container -->
        <div id="companiesContainer">
            <!-- Axtarış sahəsi -->
            <div class="py-3 px-6">
                <div
                    class="relative font-normal flex items-center w-full border border-surface-variant dark:border-surface-variant-dark rounded-full overflow-hidden focus-within:border-focus focus-within:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] focus-within:ring-0 focus-within:outline-none active:border-focus active:shadow-[0px_0px_0px_2.5px_var(--color-button-disabled)] transition-all ease-out duration-300 hover:bg-input-hover dark:hover:bg-input-hover-dark">
                    <input id="customSearchCompanies" type="text" placeholder="Axtarış..."
                        class="w-full h-full bg-transparent border-none focus:outline-none outline-none ring-0 focus:ring-0 text-[13px] text-messages dark:text-primary-text-color-dark placeholder:text-on-surface-variant-dark dark:placeholder:text-[#636B6F]">
                    <div class="absolute right-3">
                        <div class="icon stratis-search-02 dark:text-primary-text-color-dark"></div>
                    </div>
                </div>
            </div>
            <!-- Şirkətlərin dinamik yükləndiyi hissə -->
            <div id="companies"
                class="flex flex-wrap gap-2 p-5 overflow-y-auto custom-scroll max-h-[400px] justify-start">
                <!-- Şirkət kartları bura əlavə ediləcək -->
            </div>
        </div>

        <!-- İllər Siyahısı üçün Container (gizlidir) -->
        <div id="yearsContainer" class="hidden">
            <div id="years" class="flex flex-wrap p-5 overflow-y-auto custom-scroll max-h-[400px] justify-start">
                <!-- İl kartları bura əlavə ediləcək -->
            </div>
        </div>

        <!-- Aylar Siyahısı üçün Container (gizlidir) -->
        <div id="monthsContainer" class="hidden">
            <div id="months" class="flex flex-wrap p-5 overflow-y-auto custom-scroll max-h-[400px] justify-start">
                <!-- Ay kartları bura əlavə ediləcək -->
            </div>
        </div>

    </div>
</div>

<div id="filterPop" class="hidden fixed inset-0 bg-[#0000002A] flex items-center justify-center z-100">
    <div
        class="w-[450px]  dark:bg-menu-dark text-messages dark:text-primary-text-color-dark border-[#0000001A] dark:border-[#FFFFFF1A] border-[3px] shadow-[0px_0px_30px_0px_rgba(0,0,0,0.05)] rounded-2xl bg-white z-101 fixed top-[50%] left-[50%] transform -translate-y-1/2 -translate-x-1/2 p-6">
        <form onsubmit="return false;" data-url="/hesablashmalar/datatable" id="filterForm">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
            <div>
                <div class="flex items-center justify-between">
                    <div class="text-[15px] font-medium">
                        Filter
                    </div>
                    <div onclick="openFilterModal()" class="icon stratis-x-02 text-xs cursor-pointer dark:hidden">
                    </div>
                </div>
            </div>
            <div class="flex flex-col justify-between gap-2">
                <div class="relative">
                    <div class="hidden">
                        <span
                            class="text-[12px] text-tertiary-text  dark:text-tertiary-text-color-dark font-medium">Şirkətlər</span>
                        <button id="dropdownDefaultButton_company"
                            class="cursor-pointer font-normal  rounded-2xl text-[12px] px-5 py-2.5 text-center flex items-center justify-between border border-[#0000001A] w-full h-[34px] hover:bg-container-2 dark:bg-[#161E22] dark:text-white dark:border-[#FFFFFF1A] dark:hover:bg-[#1F282C]"
                            type="button" onclick="toggleDropdown_company()">
                            Seçim edin
                            <div>
                                <img src="/public/images/Avankart/Sirket/chevron-down.svg" alt=""
                                    class="w-[15px] h-[13px] dark:invert">
                            </div>
                        </button>
                        <div id="dropdown_company"
                            class="hidden absolute mt-2 w-[402px] max-h-[200px] overflow-y-auto overflow-x-hidden custom-scroll bg-white border-[.5px] border-stroke rounded-lg shadow z-50 dark:bg-[#161E22] dark:border-[#FFFFFF1A] visible">

                            <label for="goory"
                                class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                <input type="checkbox" id="goory" class="peer hidden">
                                <div
                                    class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                    <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center"></div>
                                </div>
                                <span class="dark:text-white">Goory Restaurant</span>
                            </label>

                            <label for="malta"
                                class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:bg-[#161E22] dark:hover:bg-input-hover-dark">
                                <input type="checkbox" id="malta" class="peer hidden">
                                <div
                                    class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                    <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center"></div>
                                </div>
                                <span class="dark:text-white">Malta</span>
                            </label>

                            <label for="ozsut"
                                class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:bg-[#161E22] dark:hover:bg-input-hover-dark">
                                <input type="checkbox" id="ozsut" class="peer hidden">
                                <div
                                    class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                    <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center"></div>
                                </div>
                                <span class="dark:text-white">Özsüt</span>
                            </label>

                            <label for="faxrali"
                                class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:bg-[#161E22] dark:hover:bg-input-hover-dark">
                                <input type="checkbox" id="faxrali" class="peer hidden">
                                <div
                                    class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                    <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center"></div>
                                </div>
                                <span class="dark:text-white">Faxrali</span>
                            </label>

                            <label for="qedimQebele"
                                class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:bg-[#161E22] dark:hover:bg-input-hover-dark">
                                <input type="checkbox" id="qedimQebele" class="peer hidden">
                                <div
                                    class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                    <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center"></div>
                                </div>
                                <span class="dark:text-white">Qədim Qəbələ</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="flex items-center gap-2">
                        <div class="relative w-1/2">
                            <span
                                class="text-[12px] text-tertiary-text dark:text-tertiary-text-color-dark font-medium">İl</span>
                            <button id="dropdownDefaultButton_years"
                                class="cursor-pointer font-normal  rounded-2xl text-[12px] px-5 py-2.5 text-center flex items-center justify-between border border-[#0000001A] w-full h-[34px] hover:bg-container-2 dark:bg-[#161E22] dark:text-white dark:border-[#FFFFFF1A] dark:hover:bg-[#1F282C]"
                                type="button" onclick="toggleDropdown_years()">
                                <% const currentYear=new Date().getFullYear(); %>
                                Seçim edin
                                <div>
                                    <img src="/public/images/Avankart/Sirket/chevron-down.svg" alt=""
                                        class="w-[15px] h-[13px] dark:invert">
                                </div>
                            </button>
                            <div id="dropdown_years"
                                class="hidden absolute left-0 w-full mt-2 max-h-[200px] overflow-y-auto overflow-x-hidden custom-scroll bg-white border-[.5px] border-stroke rounded-lg shadow z-50 dark:bg-[#161E22] dark:border-[#FFFFFF1A] visible">
                                <% for (let i=0; i < 7; i++) { const year=currentYear - i; %>
                                <label for="year<%=year%>"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input value="<%=year%>" type="checkbox" id="year<%=year%>" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white"><%=year%></span>
                                </label>
                                <% }; %>
                            </div>
                        </div>
                        <div class="relative w-1/2">
                            <span
                                class="text-[12px] text-tertiary-text dark:text-tertiary-text-color-dark font-medium">Ay</span>
                            <button id="dropdownDefaultButton_months"
                                class="cursor-pointer font-normal  rounded-2xl text-[12px] px-5 py-2.5 text-center flex items-center justify-between border border-[#0000001A] w-full h-[34px] hover:bg-container-2 dark:bg-[#161E22] dark:text-white dark:border-[#FFFFFF1A] dark:hover:bg-[#1F282C]"
                                type="button" onclick="toggleDropdown_months()">
                                Seçim edin
                                <div>
                                    <img src="/public/images/Avankart/Sirket/chevron-down.svg" alt=""
                                        class="w-[15px] h-[13px] dark:invert">
                                </div>
                            </button>
                            <div id="dropdown_months"
                                class="hidden absolute left-0 w-full mt-2 max-h-[200px] overflow-y-auto overflow-x-hidden custom-scroll bg-white border-[.5px] border-stroke rounded-lg shadow z-50 dark:bg-[#161E22] dark:border-[#FFFFFF1A] visible">
                                <label for="month01"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month01" value="month01" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Yanvar</span>
                                </label>
                                <label for="month02"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month02" value="month02" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Fevral</span>
                                </label>
                                <label for="month03"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month03" value="month03" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Mart</span>
                                </label>
                                <label for="month04"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month04" value="month04" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Aprel</span>
                                </label>
                                <label for="month05"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month05" value="month05" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">May</span>
                                </label>
                                <label for="month06"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month06" value="month06" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Iyun</span>
                                </label>
                                <label for="month07"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month07" value="month07" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Iyul</span>
                                </label>
                                <label for="month08"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month08" value="month08" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Avqust</span>
                                </label>
                                <label for="month09"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month09" value="month09" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Sentyabr</span>
                                </label>
                                <label for="month10"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month10" value="month10" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Oktyabr</span>
                                </label>
                                <label for="month11"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month11" value="month11" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Noyabr</span>
                                </label>
                                <label for="month12"
                                    class="flex items-center px-4 py-1 text-[13px] hover:bg-input-hover cursor-pointer select-none gap-2 dark:hover:bg-input-hover-dark">
                                    <input type="checkbox" id="month12" value="month12" class="peer hidden">
                                    <div
                                        class="w-[14px] h-[14px] border border-surface-variant dark:border-surface-variant-dark rounded-[2px] flex items-center justify-center dark:bg-[#161E22] text-on-primary dark:text-side-bar-item-dark peer-checked:bg-primary dark:peer-checked:bg-primary-dark peer-checked:text-on-primary dark:peer-checked:text-on-primary-dark peer-checked:border-primary dark:peer-checked:border-primary-dark transition cursor-pointer">
                                        <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                        </div>
                                    </div>
                                    <span class="dark:text-white">Dekabr</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <span class="text-[12px] font-medium opacity-65">Kart kateqoriyası</span>
                    <div class="mt-[6px]">
                        <div class="flex items-center flex-wrap gap-4">
                            <% allCards?.forEach(ca => { %>
                            <label for="cbxcard-<%= ca._id %>"
                                class="flex items-center gap-2 cursor-pointer select-none text-[13px] font-normal">
                                <input type="checkbox" id="cbxcard-<%= ca._id %>" class="peer hidden" name="card_category"
                                    value="<%= ca._id %>">
                                <div
                                    class="bg-menu border border-surface-variant rounded-[2px] w-[18px] h-[18px] flex items-center justify-center text-on-primary 
                        peer-checked:bg-primary peer-checked:text-on-primary peer-checked:border-primary transition">
                                    <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                    </div>
                                </div>
                                <div><%= ca.name %></div>
                            </label>
                            <% }) %>
                        </div>
                    </div>
                </div>
                <div>
                    <span class="text-[12px] font-medium opacity-65">Status</span>
                    <div class="mt-[6px]">
                        <div class="flex items-center flex-wrap gap-4">
                            <label for="cbx-active"
                                class="flex items-center gap-2 cursor-pointer select-none text-[13px] font-normal">
                                <input type="checkbox" id="cbx-active" class="peer hidden" name="card_status"
                                    value="active">
                                <div
                                    class="bg-menu border border-surface-variant rounded-[2px] w-[18px] h-[18px] flex items-center justify-center text-on-primary 
                                                        peer-checked:bg-primary peer-checked:text-on-primary peer-checked:border-primary transition">
                                    <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                    </div>
                                </div>
                                <div>Aktiv</div>
                            </label>
                            <label for="cbx-completed"
                                class="flex items-center gap-2 cursor-pointer select-none text-[13px] font-normal">
                                <input type="checkbox" id="cbx-completed" class="peer hidden" name="card_status"
                                    value="tamamlandi">
                                <div
                                    class="bg-menu border border-surface-variant rounded-[2px] w-[18px] h-[18px] flex items-center justify-center text-on-primary 
                                                        peer-checked:bg-primary peer-checked:text-on-primary peer-checked:border-primary transition">
                                    <div class="icon stratis-check-01 scale-60 h-[18px] w-[18px] text-center">
                                    </div>
                                </div>
                                <div>Tamamlandı</div>
                            </label>
                        </div>
                    </div>
                </div>
                <div>
                    <span class="text-[12px] font-medium opacity-65">Məbləğ aralığı</span>
                    <div class="value-container mt-2">
                        <span id="min-value" class="value-label text-[13px] text-messages font-medium"></span>
                        <span id="max-value" class="value-label text-[13px] text-messages font-medium"></span>
                    </div>
                    <div id="slider-range" class="mt-2"></div>
                    <div class="flex items-center justify-between text-[11px] opacity-50 font-medium mt-2">
                        <span>Min</span>
                        <span>Max</span>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end gap-3">
                <button type="button"
                    class="bg-surface rounded-[50px] dark:bg-surface-bright-dark dark:text-on-surface-variant-dark text-on-surface-variant text-[13px] font-medium px-[18px] py-[6.5px] cursor-pointer hover:text-messages"
                    onclick="openFilterModal()">Bağla</button>
                <button type="reset" onclick="clearFilters()"
                    class="bg-surface rounded-[50px] dark:bg-surface-bright-dark dark:text-on-surface-variant-dark text-on-surface-variant text-[13px] font-medium px-[18px] py-[6.5px] cursor-pointer hover:text-messages">Filterləri
                    təmizlə</button>
                <button onclick="applyFilters()" type="button"
                    class="bg-primary rounded-[50px] text-white text-[13px] font-medium px-[18px] py-[6.5px] cursor-pointer hover:bg-hover-button">Filterlə</button>
            </div>
        </form>
    </div>
</div>
    <% scripts=`<script src="/js/jquery-ui.js"></script><script src="/js/datatables/datatables.min.js"></script><script src="/js/Avankart/sirket/eQaime/eQaimeTable.js"></script>
    
    <script src="/js/Avankart/sirket/eQaime/countdown.js"></script>` %>

    <% styles = `
  <style>
    .dt-column-order {
      display: none !important;
    }

    table,
    thead,
    table.dataTable>thead>tr>th,
    table.dataTable>thead>tr>td,
    table.dataTable>tbody>tr:last-child>*,
    div.dt-container.dt-empty-footer tbody>tr:last-child>* {
      border: none;
      font-weight: 400;
    }

    table.dataTable th.dt-type-numeric,
    table.dataTable th.dt-type-date,
    table.dataTable td.dt-type-date {
      text-align: left;
    }

    #sidebar .overflow-y-auto {
      scrollbar-width: none;
      /* Firefox üçün */
      -ms-overflow-style: none;
      /* IE 10+ üçün */
    }

    /* Bu hissəni öz CSS faylında əlavə et */
    .custom-scroll::-webkit-scrollbar {
      width: 4px;
    }

    .custom-scroll::-webkit-scrollbar-thumb {
      background-color: rgba(0, 0, 0, 0.15);
      border-radius: 4px;
    }

    .custom-scroll::-webkit-scrollbar-track {
      background-color: transparent;
    }

    input[type="date"]::-webkit-inner-spin-button,
    input[type="date"]::-webkit-calendar-picker-indicator {
      display: none;
      -webkit-appearance: none;
    }

    /* Main container styles */
    .slider-container {
      width: 100%;
      max-width: 800px;
    }

    /* Value display container */
    .value-container {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    /* Custom slider styles */
    #slider-range {
      height: 6px;
      border: none;
      background: #9c78ae;
      /* Purple background for the entire track */
      border-radius: 3px;
    }

    /* Slider range (colored part between handles) */
    #slider-range .ui-slider-range {
      background: #e6e6e6;
      /* Gray color for area between handles */
    }

    /* Slider handles */
    #slider-range .ui-slider-handle {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: white;
      border: 4px solid #745086;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      outline: none;
      top: -7px;
      margin-left: -10px;
    }
  </style>
`; %>